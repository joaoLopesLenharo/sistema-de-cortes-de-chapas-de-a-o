<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öôÔ∏è Sistema de Otimiza√ß√£o de Corte Cont√≠nuo</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>‚öôÔ∏è Sistema de Otimiza√ß√£o de Corte Cont√≠nuo</h1>
            <p class="subtitle">CNC / Laser / Usinagem - Ciclos Eulerianos</p>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Modo de Opera√ß√£o -->
                <section class="card">
                    <h2>üîß Modo de Opera√ß√£o</h2>
                    <div class="mode-buttons">
                        <button id="mode-point" class="mode-btn active" data-mode="point">
                            üìç Pontos de Corte
                        </button>
                        <button id="mode-edge" class="mode-btn" data-mode="edge">
                            ‚úÇÔ∏è Trajet√≥rias
                        </button>
                    </div>
                    <div class="mode-indicator">
                        <span id="mode-text">Modo: Definir Pontos</span>
                    </div>
                </section>

                <!-- Adicionar Ponto -->
                <section class="card">
                    <h2>üìç Adicionar Ponto</h2>
                    <div class="form-group">
                        <label>ID:</label>
                        <input type="text" id="point-id" placeholder="Auto">
                    </div>
                    <div class="form-group">
                        <label>X (mm):</label>
                        <input type="number" id="point-x" step="0.1" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label>Y (mm):</label>
                        <input type="number" id="point-y" step="0.1" placeholder="0">
                    </div>
                    <button class="btn btn-primary" onclick="adicionarPontoManual()">
                        ‚ûï Adicionar
                    </button>
                </section>

                <!-- Conectar Pontos -->
                <section class="card">
                    <h2>‚úÇÔ∏è Conectar Pontos</h2>
                    <div class="form-group">
                        <label>Ponto 1:</label>
                        <select id="edge-from">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ponto 2:</label>
                        <select id="edge-to">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="adicionarTrajetoria()">
                        üîó Conectar
                    </button>
                </section>

                <!-- Par√¢metros -->
                <section class="card">
                    <h2>‚öôÔ∏è Par√¢metros</h2>
                    <div class="form-group">
                        <label>Velocidade (mm/min):</label>
                        <input type="number" id="velocidade" value="100" step="1">
                    </div>
                    <div class="form-group">
                        <label>Tempo Setup (min):</label>
                        <input type="number" id="tempo-setup" value="0.5" step="0.1">
                    </div>
                </section>

                <!-- A√ß√µes -->
                <section class="card">
                    <h2>üéØ A√ß√µes</h2>
                    <button class="btn btn-success btn-block" onclick="otimizar()">
                        üöÄ Otimizar Caminho
                    </button>
                    <button id="btn-animar" class="btn btn-warning btn-block" onclick="animarCaminho()" style="display: none;">
                        ‚ñ∂Ô∏è Animar Corte
                    </button>
                    <button id="btn-parar-animacao" class="btn btn-secondary btn-block" onclick="pararAnimacao()" style="display: none;">
                        ‚èπÔ∏è Parar Anima√ß√£o
                    </button>
                    <button id="btn-excluir-ponto" class="btn btn-danger btn-block" onclick="excluirPontoSelecionado()" style="display: none;">
                        üóëÔ∏è Excluir Ponto Selecionado
                    </button>
                    <button class="btn btn-danger btn-block" onclick="limparProjeto()">
                        üóëÔ∏è Limpar Tudo
                    </button>
                </section>

                <!-- Exemplos -->
                <section class="card">
                    <h2>üì¶ Exemplos</h2>
                    <button class="btn btn-secondary btn-block" onclick="carregarExemplo('retangular')">
                        ‚¨ú Placa Retangular
                    </button>
                    <button class="btn btn-secondary btn-block" onclick="carregarExemplo('estrela')">
                        ‚≠ê Pe√ßa Estrela
                    </button>
                    <button class="btn btn-secondary btn-block" onclick="carregarExemplo('grade')">
                        üî∑ Grade
                    </button>
                </section>

                <!-- Status -->
                <section class="card">
                    <h2>üìä Status</h2>
                    <div id="status-info">
                        <p>Pontos: <span id="num-points">0</span></p>
                        <p>Trajet√≥rias: <span id="num-edges">0</span></p>
                        <p id="status-text" class="status-waiting">Aguardando...</p>
                    </div>
                    <div id="tempo-info" class="tempo-info hidden"></div>
                </section>
            </aside>

            <!-- Canvas Area -->
            <main class="canvas-area">
                <div class="canvas-container">
                    <canvas id="canvas"></canvas>
                    <div class="canvas-overlay">
                        <div id="canvas-hint" class="hint">
                            Clique para adicionar pontos de corte
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Results Panel -->
        <div id="results-panel" class="results-panel hidden">
            <div class="results-header">
                <h2>üìã Programa CNC Gerado</h2>
                <button class="btn-close" onclick="fecharResultados()">√ó</button>
            </div>
            <div class="results-content">
                <div class="results-stats" id="results-stats"></div>
                <div class="code-block">
                    <pre id="cnc-code"></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>

